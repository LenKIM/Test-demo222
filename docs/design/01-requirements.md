#  요구사항 정의

## 📦 상품 

### 상품 목록


⭕️ Happy Path

- 사용자가 상품 목로 페이지에 접근한다.
- 시스템은 첫 페이지의 상품 10개를 최신순으로 조회하여 반환한다.
- 각 상품에는 상품명 ,가격 , 좋아요 여부 , 좋아요 수, 브랜드 정보가 포함된다.
- 상품은 특정 브랜드로 필터링하여 조회할 수 있다. 
- 가격순 , 인기순 , 좋아요 순으로 정렬할 수 있다. 

❌ Fail Path

- 조회할 상품이 없을 경우 , 시스템은 빈 상품 목록을 반환한다.

♦️ 비기능적 요구사항

|케이스|설명|HTTP 상태 코드 | 예외 클래스 |
|---|---|---|---|
|잘못 된 정렬 값 | 지원하지 않는 정렬 파라미터가 입력 된 경우 | 400 Bad Request | InvalidSortParameterException |
|잘못된 페이지 값 | 페이지나 번호나 사이즈가 음수인 경우 | 400 Bad Request | InvalidPageParameterException |

### 상품 상세

⭕️ Happy Path

- 사용자는 상품 목록에서 특정 상품을 클릭하여 상세 페이지로 이동할 수 있다.
- 시스템은 해당 상품의 상품명 , 상품 가격 , 브랜드 정보 , 좋아요 여부 , 총 좋아요 개수를 조회하여 반환한다.

❌  Fail Path

- 상품이 존재하지 않을 경우 , 시스템은 404 에러를 반환한다.

️️♦️  비기능적 요구사항

|케이스|설명|HTTP 상태 코드 | 예외 클래스 |
|---|---|---|---|
|상품 미존재 | 존재하지 않는 상품 ID를 조회하려는 경우 | 404 Not Found | ProductNotFoundException |
|잘못된 상품 ID | 상품 ID가 숫자가 아닌 경우 | 400 Bad Request | InvalidProductIdException |

****

<br/><br/>

## 🅱️ 브랜드

### 브랜드 정보 조회

⭕️ Happy Path

- 사용자가 상품 상세 페이지에서 특정 브랜드를 클릭한다. 
- 시스템은 해당 브랜드 정보 (브랜드명 , 브랜드 설명 , 브랜드 좋아요 수)를 조회하여 반환한다.

❌Fail Path

- 브랜드가 존재하지 않을 경우 , 시스템은 404 에러를 반환한다.

️️♦️  비기능적 요구사항

|케이스|설명|HTTP 상태 코드 | 예외 클래스 |
|---|---|---|---|
|브랜드 미존재 | 존재하지 않는 브랜드 ID를 조회하려는 경우 | 404 Not Found | BrandNotFoundException |

*****


<br/><br/>


## ❤️ 좋아요

### 상품 좋아요 등록

⭕️ Happy Path

- 사용자가 상품 상세 페이지 또는 목록에서 '좋아요' 버튼을 클릭한다.
- 시스템은 해당 상품에 대해 이 사용자가 이미 '좋아요'를 누른 상태인지 확인한다.
- '좋아요' 기록이 없으면 시스템은 likes 테이블에 사용자 ID와 상품 ID를 추가한다.
- 사용자에게 성공 메시지를 반환한다.

❌ Fail Path

- 로그인하지 않은 경우 , '로그인이 필요한 기능입니다.'라는 메시지를 보여주고, 로그인 페이지로 유도한다.
- 이미 '좋아요' 를 누른 상품에 POST 요청을 한 경우 ,시스템은 아무런 변화 없이 현재 상태를 유지하거나  '이미 좋아요를 누른 상품입니다.'라는 메시지를 반환한다.
- 존재하지 않는 상품에 대해 좋아요를 누르려는 경우 , 시스템은 '존재하지 않는 상품입니다.'라는 메시지를 반환한다.

️️♦️  비기능적 요구사항

|케이스|설명| HTTP 상태 코드 | 예외 클래스 |
|---|---|-----------|---|
|인증 실패| 미 로그인            | 401 Unauthorized | AuthenticationException |
|좋아요 중복| 이미 좋아요를 누른 상품에 대해 좋아요를 다시 누른 경우 | 409 Conflict | LikeAlreadyExistsException |
|상품 미존재| 존재하지 않는 상품에 대해 좋아요를 누르려는 경우 | 404 Not Found | ProductNotFoundException |


### 상품 좋아요 취소

⭕️ Happy Path

- 사용자가 '좋아요'가 눌러진 상품의 버튼을 다시 클릭한다.
- 시스템은 likes 테이블에서 해당 사용자 ID와 상품 ID에 해당하는 기록을 삭제한다.
- 사용자에게 성공 메시지를 반환한다.

❌ Fail Path

- 로그인하지 않은 경우 , '로그인이 필요한 기능입니다.'라는 메시지를 보여주고, 로그인 페이지로 유도한다.
- 이미 '좋아요'를 취소한 상품에 DELETE 요청을 한 경우 , 시스템은 아무런 변화 없이 현재 상태를 유지하거나 '이미 좋아요를 취소한 상품입니다.'라는 메시지를 반환한다.
- 존재하지 않는 상품에 대해 좋아요 취소를 시도하는 경우 , 시스템은 '존재하지 않는 상품입니다.'라는 메시지를 반환한다.

️️♦️  비기능적 요구사항

|케이스|설명| HTTP 상태 코드 | 예외 클래스 |
|---|---|------------|---|
|인증 실패| 미 로그인             | 401 Unauthorized | AuthenticationException |
|좋아요 미존재| 이미 좋아요를 취소한 상품에 대해 좋아요 취소를 다시 시도한 경우 | 409 Conflict | LikeNotFoundException |
|상품 미존재 | 존재하지 않는 상품에 대해 좋아요 취소를 시도하는 경우 | 404 Not Found | ProductNotFoundException |


### 내가 좋아요 한 상품 목록 조회

⭕️ Happy Path

- 사용자가 '내가 좋아요 한 상품' 페이지에 접근한다.
- 시스템은 현재 로그인한 사용자 ID 를 기준으로 likes 테이블을 조회하여 연결된 모든 Product 정보를 반환한다.

❌ Fail Path 

- 로그인하지 않은 경우 , '로그인이 필요한 기능입니다.'라는 메시지를 보여주고, 로그인 페이지로 유도한다.
- 좋아요를 누른 상품이 없는 경우 , 시스템은 빈 상품 목록을 반환한다.

️️♦️  비기능적 요구사항

|케이스|설명| HTTP 상태 코드 | 예외 클래스 |
|---|---|-------|---|
|인증 실패| 미 로그인        | 401 Unauthorized | AuthenticationException |

***

<br/><br/>

## 💰 주문 

### 주문 요청

⭕️ Happy Path

- 사용자가 구매할 상품과 수량을 선택하고 '주문하기' 버튼을 클릭한다.
- 시스템은 상품 재고가 충분한지 확인한다.
- 재고가 충분하면 , 각 상품의 재고를 주문 수량만큼 차감한다.
- 시스템은 사용자의 포인트를 확인한지 확인한다.
- 포인트가 충분하면 , 주문을 생성하고 포인트를 차감한다.
- 주문 상태를 '주문 완료'로 설정하고, 주문 정보를 반환한다.

❌ Fail Path

- 로그인하지 않은 경우 , '로그인이 필요한 기능입니다.'라는 메시지를 보여주고, 로그인 페이지로 유도한다.
- 재고가 부족한 경우 , 시스템은 '재고가 부족합니다.'라는 메시지를 반환한다.
- 포인트가 부족한 경우 , 시스템은 '포인트가 부족합니다.'라는 메시지를 반환한다.

️️♦️  비기능적 요구사항

| 케이스   |설명| HTTP 상태 코드       | 예외 클래스                     |
|-------|---|------------------|----------------------------|
| 인증 실패 | 미 로그인        | 401 Unauthorized | AuthenticationException    |
| 재고 부족 | 주문하려는 상품의 재고가 부족한 경우 | 409 Confilct     | InsufficientStockException |
|포인트 부족| 사용자의 포인트가 부족한 경우 | 409 Conflict     | InsufficientPointException |
|상품 미존재 | 주문 목록에 존재하지 않는 상품이 포함된 경우 | 404 Not Found | ProductNotFoundException |
|주문 실패 | 주문 생성 중 다른 오류가 발생한 경우 | 500 Internal Server Error | Exception|                  |                     |


### 유저의 주문 목록 조회

⭕️ Happy Path

- 사용자가 '내 주문 목록' 페이지에 접근한다.
- 시스템은 현재 로그인한 사용자 ID를 기준으로 주문 목록을 조회하여 반환한다.
- 각 주문에는 주문 ID, 주문 상태, 주문 날짜, 총 금액, 상품 목록이 포함된다.


❌ Fail Path

- 로그인하지 않은 경우 , '로그인이 필요한 기능입니다.'라는 메시지를 보여주고, 로그인 페이지로 유도한다.
- 주문이 없는 경우 , 시스템은 빈 주문 목록을 반환한다.

️️♦️  비기능적 요구사항

| 케이스   |설명| HTTP 상태 코드 | 예외 클래스 |
|-------|---|-------|---|
| 인증 실패 | 미 로그인        | 401 Unauthorized | AuthenticationException |
| 권한 없음 | 다른 사용자의 주문 목록을 조회하려는 경우 | 403 Forbidden | AuthorizationException |



### 주문 상세 조회

⭕️ Happy Path

- 사용자가 '내 주문 목록'에서 특정 주문을 클릭한다.
- 시스템은 해당 주문 ID를 기준으로 주문 상세 정보를 조회하여 반환한다.
- 각 주문 상세 정보에는 주문 ID, 주문 상태, 주문 날짜, 총 금액, 상품 목록이 포함된다.

❌ Fail Path

- 로그인하지 않은 경우 , '로그인이 필요한 기능입니다.'라는 메시지를 보여주고, 로그인 페이지로 유도한다.
- 존재하지 않는 주문 ID를 조회하려는 경우 , 시스템은 '존재하지 않는 주문입니다.'라는 메시지를 반환한다.

️️♦️  비기능적 요구사항

|케이스|설명| HTTP 상태 코드 | 예외 클래스                  |
|---|---|-------|-------------------------|
|인증 실패| 미 로그인        | 401 Unauthorized | AuthenticationException |
|권한 없음 | 다른 사용자의 주문 상세를 조회하려는 경우 | 403 Forbidden | AuthorizationException  |
|주문 미존재 | 존재하지 않는 주문 ID를 조회하려는 경우 | 404 Not Found | OrderNotFoundException  |



